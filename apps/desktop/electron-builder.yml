appId: com.codinit.dev
productName: CodinIT.dev

directories:
  buildResources: build
  output: dist

# Include built files and let electron-builder handle dependencies
files:
  - build/electron/**/*
  - build/client/**/*
  - build/server/**/*
  - package.json
  - "!**/.git"
  - "!dist"
  - "!src"
  - "!app"
  - "!electron"
  - "!public"
  - "!tests"

# electron-builder will install production dependencies automatically

extraMetadata:
  main: build/electron/main/index.mjs

# Disable asar - it can cause hanging issues
asar: false

mac:
  icon: public/icon.icns
  target: dmg
  identity: null
  hardenedRuntime: false
  gatekeeperAssess: false
  # macOS specific performance options
  type: development

dmg:
  title: ${productName} ${version}
  icon: public/icon.icns
  background: null
  window:
    width: 540
    height: 380
  contents:
    - x: 144
      y: 180
      type: file
    - x: 396
      y: 180
      type: link
      path: /Applications

win:
  icon: public/icon.png
  target: nsis

linux:
  icon: public/icon.png
  target: AppImage

# Performance and security optimizations
npmRebuild: false
nodeGypRebuild: false
buildDependenciesFromSource: false

# Exclude all dev dependencies
removePackageScripts: true
